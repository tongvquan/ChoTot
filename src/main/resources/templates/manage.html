<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="fragments/head :: head">

</head>

<body>
<header th:replace="fragments/header :: header"></header>

<div class="container w-75 bg-light mt-4">
    <div class="row pt-2 px-3">
        <b class="fs-4">Quản lý sản phẩm</b>
        <div class="py-3 col-12 col-md-12 col-lg-12 col-xl-12">
            <section class="content">

                <!-- Default box -->
                <div class="col-xs-12">
                    <div class="box">
                        <div class="box-header">
                            <a th:href="@{/sell-product}" class="btn btn-success mb-3">+Thêm mới sản phẩm</a>
                            <div class="box-tools">
                                <div class="input-group input-group-sm" style="width: 150px;">
                                    <input type="text" name="table_search" class="form-control pull-right" placeholder="Search">
                                    <div class="input-group-btn">
                                        <button type="submit" class="btn btn-default"><i class="fa fa-search"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- /.box-header -->
                        <div class="box-body table-responsive no-padding">
                            <table class="table table-hover">
                                <tbody>
                                <tr>
                                    <th>Id</th>
                                    <th>Ảnh</th>
                                    <th>Tên sản phẩm</th>
                                    <th>Thương hiệu</th>
                                    <th>Giá bán</th>
                                    <th>Thời gian</th>
                                    <th>Tùy chọn</th>
                                    <th>Trạng thái</th>
                                </tr>
                                <tr th:each="product, index : ${listProduct}">
                                    <td th:text="${index.index + 1}"></td>
                                    <td><img th:src="@{'/uploads/'+ ${product.image}}" alt="" width="100px"></td>
                                    <td th:text="${product.name}"></td>
                                    <td th:if="${product.category != null}" th:text="${product.category.name}"></td>
                                    <td th:unless="${product.category != null}">[Category not available]</td> <!-- Thêm dòng này nếu category là null -->
                                    <td th:text="${product.price}"></td>

                                    <td th:if="${product.modifiedDate != null}" th:text="${product.modifiedDate}"></td>
                                    <td th:unless="${product.modifiedDate != null}" th:text="${product.createdDate}"></td>

                                    <td>
                                        <a th:href="@{/edit-product/{id}(id=${product.id})}" class="btn btn-success">Sửa</a>
                                        <a th:href="@{/delete-product/{id}(id=${product.id})}" class="btn btn-danger">Xóa</a>
                                    </td>
                                    <td th:if="${product.status == 0}">Đang bán</td>
                                    <td th:if="${product.status == 1}">Chờ xác nhận</td>
                                    <td th:if="${product.status == 2}">
                                        <form th:action="@{/confirm/{id}(id=${product.id})}" method="post" id="confirmForm">
                                            <button type="submit" class="btn btn-success">Bắt đầu giao hàng</button>
                                        </form>
                                    </td>
                                    <td th:if="${product.status == 3}">
                                        <form th:action="@{/confirm/{id}(id=${product.id})}" method="post" id="confirm">
                                            <button type="submit" class="btn btn-success">Giao thành công</button>
                                        </form>
                                    </td>
                                    <td th:if="${product.status == 4}">Chờ người mua xác nhận</td>
                                    <td th:if="${product.status == 5}">Chờ ad xác nhận</td>
                                    <td th:if="${product.status == 6}">Chờ thanh toán</td>
                                    <td th:if="${product.status == 7}">Thành công</td>
                                </tr>
                                </tbody></table>
                        </div>
                        <!-- /.box-body -->
                    </div>
                    <!-- /.box -->
                </div>
                <!-- /.box -->

            </section>
        </div>
    </div>
</div>



<footer th:replace="fragments/footer :: footer"></footer>


<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script th:src="@{/assets/js/script.js}"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        var toggleMenu = document.getElementById("toggleMenu");
        var accountMenu = document.getElementById("accountMenu");

        toggleMenu.addEventListener("mouseenter", function() {
            accountMenu.style.display = "block"; // Hiển thị thanh menu khi di chuột vào
        });

        toggleMenu.addEventListener("mouseleave", function() {
            accountMenu.style.display = "none"; // Ẩn thanh menu khi di chuột ra
        });
    });

</script>
</body>

</html>